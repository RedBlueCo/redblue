<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>RedBlue Annotations: Third-Party Embeds</title>
    <link rel="stylesheet" href="index.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/solarized-light.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/xml.min.js"></script>
  </head>
  <body>
    <hgroup>
      <h1>RedBlue Annotations</h1>
      <h2>Third-Party Embeds</h2>
    </hgroup>
    <article>
      <h2>Hotspot Over YouTube Video</h2>
      <nav id="tab-links" class="tab-links">
        <a class="tab-link" href="#xml">XML</a>
        <a class="tab-link" href="#json-ld">JSON-LD</a>
      </nav>
      <article id="xml" class="tab">
        <h3>XML</h3>

        <h4>Code</h4>
        <!-- <textarea id="code" rows="20" readonly="readonly"></textarea> -->
        <pre><code id="code-xml" class="xml"></code></pre>

        <h4>Result</h4>
        <redblue-video id="redblue-youtube-xml" aspect-ratio="16:9" debug="debug">
          <hvml
            xmlns="https://hypervideo.tech/hvml#"
            xmlns:xlink="http://www.w3.org/1999/xlink"
            xmlns:css="https://www.w3.org/TR/CSS/"
            xml:lang="en-US"
            hidden="hidden"
          >
            <video type="personal" xml:id="ep-23">
              <title>Overnight Dance Party at the Museum of Fine Arts Boston</title>
              <episode>23</episode>
              <recorded>2016-09-17</recorded>
              <description type="xhtml">
                <div xmlns="http://www.w3.org/1999/xhtml">
                  <p>Full Facebook Live stream: http://hugh.today/2016-09-17/live</p>
                  <p>#mfaNOW #mfaLateNites</p>
                </div>
              </description>
              <showing scope="release" type="internet" admission="private">
                <venue type="site">
                  <entity site="https://www.youtube.com/">YouTube</entity>
                  <uri>https://www.youtube.com/watch?v=nWdWq3hMwao</uri>
                  <title>Overnight Dance Party at the Museum of Fine Arts Boston | Hugh’s Vlog | #mfaNOW #mfaLateNites</title>
                </venue>
              </showing>
              <presentation>
                <choice xml:id="full-stream">
                  <name>Go to: <code style="font-family: inherit; font-weight: bold;">hugh.today/2016-09-17/live</code> for the full stream</name>
                  <goto on="duration" xlink:actuate="onRequest" xlink:href="http://hugh.today/2016-09-17/live" width="70%" height="13%" css:font-size="calc(384 / 150 * 1vw)" css:font-family="'Noto Sans CJK JP', 'Noto Sans CJK', 'Noto Sans', sans-serif" css:white-space="nowrap" css:overflow="hidden">
                    <animate startTime="517.292107" endTime="518.872131" startX="14.9%" startY="-15%" endX="15%" endY="10%"></animate>
                    <animate startTime="523.373882" endTime="524.873404" startX="14.9%" startY="10%" endX="15%" endY="-15%"></animate>
                  </goto>
                </choice>
              </presentation>
            </video>
          </hvml>
        </redblue-video>
      </article>
      <article id="json-ld" class="tab">
        <h3>JSON-LD</h3>

        <h4>Code</h4>
        <pre><code id="code-json-ld" class="xml"></code></pre>

        <redblue-video id="redblue-youtube-json-ld" aspect-ratio="16:9" debug="debug">
          <script type="application/ld+json">
          {
            "@context": "hvml.context.jsonld",
            "@type": "video",
            "@id":  "vlog:2016-09-17",
            "xml:id": "ep-23",
            "type": "personal",
            "title": "Overnight Dance Party at the Museum of Fine Arts Boston",
            "episode": 23,
            "recorded": "2016-09-17",
            "description": {
              "html:div": {
                "childNodes": [
                  {
                    "@type": "p",
                    "@value": "Full Facebook Live stream: http://hugh.today/2016-09-17/live"
                  },
                  {
                    "@type": "p",
                    "@value": "#mfaNOW #mfaLateNites"
                  }
                ]
              }
            },
            "showing": {
              "scope": "release",
              "type": "internet",
              "admission": "private",
              "venue": {
                "type": "site",
                "entity": [
                  {
                    "site": "https://www.youtube.com/"
                  },
                  "YouTube"
                ],
                "uri": "https://www.youtube.com/watch?v=nWdWq3hMwao",
                "title": "Overnight Dance Party at the Museum of Fine Arts Boston | Hugh’s Vlog | #mfaNOW #mfaLateNites"
              }
            },
            "presentation": {
              "choice": {
                "name": [
                  "Go to: ",
                  {
                    "@type": "code",
                    "style": "font-family: inherit; font-weight: bold;",
                    "textContent": "hugh.today/2016-09-17/live"
                  },
                  " for the full stream"
                ],
                "goto": {
                  "on": "duration",
                  "xlink:actuate": "onRequest",
                  "xlink:href": "http://hugh.today/2016-09-17/live",
                  "width": "70%",
                  "height": "13%",
                  "css:font-size": "calc(384 / 150 * 1vw)",
                  "css:font-family": "'Noto Sans CJK JP', 'Noto Sans CJK', 'Noto Sans', sans-serif",
                  "css:white-space": "nowrap",
                  "css:overflow": "hidden",
                  "animate": [
                    {
                      "startTime": "517.292107",
                      "endTime": "518.872131",
                      "startX": "14.9%",
                      "startY": "-15%",
                      "endX": "15%",
                      "endY": "10%"
                    },
                    {
                      "startTime": "523.373882",
                      "endTime": "524.873404",
                      "startX": "14.9%",
                      "startY": "10%",
                      "endX": "15%",
                      "endY": "-15%"
                    }
                  ]
                }
              }
            }
          }
          </script>
        </redblue-video>
      </article>
    </article>
    <div id="scripts">
      <script id="page">
      // (function () {
        'use strict';

        const highlightCode = () => {
          const $codeXML = document.getElementById( 'code-xml' );
          const $codeJSONLD = document.getElementById( 'code-json-ld' );
          const extraWhitespace8 = /\n\s{8}/gi;
          const extraWhitespace6 = /\n\s{6}/gi;
          const closingTag = /\n\s*(<\/redblue-video>)/gi;

          if ( $codeXML ) {
            $codeXML.textContent = document.getElementById( 'redblue-youtube-xml' ).outerHTML
              .replace( extraWhitespace8, '\n    ' )
              .replace( extraWhitespace6, '\n   ' )
              .replace( closingTag, '\n$1' )
            ;
          }

          if ( $codeJSONLD ) {
            $codeJSONLD.textContent = document.getElementById( 'redblue-youtube-json-ld' ).outerHTML
              .replace( extraWhitespace8, '\n    ' )
              .replace( extraWhitespace6, '\n   ' )
              .replace( closingTag, '\n$1' )
            ;
          }

          hljs.initHighlighting();
        };
        const scrolled = false;
        const $tabLinks = document.getElementById( 'tab-links' );
        const scrollToTop = function ( event ) {
          event.preventDefault();
          window.location.hash = event.target.getAttribute( 'href' );
          window.scrollTo( 0, 0 );
        };

        $tabLinks.addEventListener( 'click', scrollToTop );

        highlightCode();
      // })();
      </script>
      <!-- Omni-Parser Config (XML + JSON-LD) -->
      <script type="module">
        import RedBlueVideo from './modules/redblue-video-omni.js';
        customElements.define( RedBlueVideo.is, RedBlueVideo );
      </script>
      <!-- Omni-Parser Config with Custom JSON Search -->
      <!-- <script type="module">
        import RedBlueVideo from './modules/redblue-video.js';
        import RedBlueXMLParser from './modules/parser-xml.js';
        import RedBlueJSONLDParser from './modules/parser-json-ld.js';
        RedBlueJSONLDParser.customJSONSearchUtility = function ( xpathExpression, contextNode, namespaceResolver, resultType, result ) {
          const params = { xpathExpression, contextNode, namespaceResolver, resultType, result };
          console.log( 'params', params );
          return params;
        };
        const RedBlueVideoOmni = RedBlueJSONLDParser( RedBlueXMLParser( RedBlueVideo ) );
        customElements.define( RedBlueVideoOmni.is, RedBlueVideoOmni );
      </script> -->
    </div>
  </body>
</html>
<!--
  Design considerations:
  • Does `playlist` make sense to mark up annotations *within* a video,
    or is it only for “meta-videos”, i.e. those that embed other videos?
  • `playlist type="nonlinear"` is only required if sibling actions
    (`goto`, `playlistAction`, `media`) are not guranteed to execute.
  • `playlist type="linear"` means that all actions are guaranteed to
    execute provided the user encounters their triggers (typically duration)
  • If a video only has one action, is `playlist` required?
-->
