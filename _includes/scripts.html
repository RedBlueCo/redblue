<script>
  var $emailLink = document.getElementById( 'email-link' );
  $emailLink.setAttribute( 'title', 'Copy e-mail address' );
  $emailLink.setAttribute( 'role', 'button' );

  var emailAddress = $emailLink.getAttribute( 'href' ).split( 'mailto:' );
  emailAddress = emailAddress[1];

  var $dummyInput = document.createElement( 'input' );
  // $dummyInput.setAttribute( 'style', '' );
  $dummyInput.setAttribute( 'id', 'email-input' );
  $dummyInput.setAttribute( 'type', 'email' );
  $dummyInput.setAttribute( 'readonly', 'readonly' );
  $dummyInput.setAttribute( 'value', emailAddress );

  var $label = document.createElement( 'label' );
  $label.setAttribute( 'for', 'email-input' );
  $label.textContent = $emailLink.textContent;
  $emailLink.textContent = '';
  $emailLink.appendChild( $label );
  $emailLink.parentNode.appendChild( $dummyInput );

  // <input id="email-address" id="email-address" type="hidden" readonly="readonly" value="hugh@redblue.video" />
  $emailLink.addEventListener( 'keypress', handleEmailKeyPress, false );
  $emailLink.addEventListener( 'click', copyEmailAddressToClipboard, false );

  function handleEmailKeyPress( event ) {
    if ( event.key === ' ' || event.key === 'Enter' ) {
      copyEmailAddressToClipboard( event );
    }
  }

  function copyEmailAddressToClipboard( event ) {
    event.preventDefault();
    $dummyInput.select();
    document.execCommand( 'copy' );
    alert( 'Copied e-mail address to clipboard' );
  }
</script>
<script id="analytics">
  function deuglifyAnalyticsURL() {
    if ( 'history' in window ) {
      history.replaceState( {}, document.title, window.location.href.replace( /(\?|&)utm_([^&]+)/gi, '' ).replace( '?&', '?' ).replace( /(&|\?)$/i, '' ) );
    }
  }

  var isProduction = /^https?:\/\/(www\.)?redblue\.video/i.test( window.location.origin );
  var isInternalTrafficLink = /(?:\?|&)utm_source=internal\b/.test( window.location.search );
  var isInternalTraffic = false;

  if ( 'localStorage' in window ) {
    if ( isInternalTrafficLink ) {
      localStorage.setItem( 'internalTraffic', 'true' );
    }
    isInternalTraffic = ( localStorage.getItem( 'internalTraffic' ) === 'true' );
  }

  if ( isProduction ) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga( 'create', 'UA-99429830-1', 'auto' );

    window.fbAsyncInit = function() {
      FB.init({
        appId      : '270333566921477',
        cookie     : true,
        xfbml      : true,
        version    : 'v3.1'
      });

      if ( !isInternalTraffic ) {
        ga( 'send', 'pageview' );
        FB.AppEvents.logPageView();
      }

      deuglifyAnalyticsURL();
    };

    (function(d, s, id){
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) {return;}
      js = d.createElement(s); js.id = id;
      js.src = "https://connect.facebook.net/en_US/sdk.js";
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));
  } // isProduction
</script>
<script src="https://apis.google.com/js/platform.js"></script>